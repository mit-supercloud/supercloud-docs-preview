<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://supercloud.mit.edu/using-the-system/software-packages/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Software and Package Management - SuperCloud Docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Software and Package Management";
        var mkdocs_page_input_path = "using-the-system/software-packages.md";
        var mkdocs_page_url = "/using-the-system/software-packages/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SuperCloud Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../requesting-account/">Requesting an Account</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../systems-and-software/">Systems and Software</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../acknowledging-us/">Acknowledging Us</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Using the System</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Files and Data</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../files-and-data/transferring-files/">Transferring Files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../files-and-data/shared-groups/">Shared Groups</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Software and Package Management</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#modules-modules">Modules {##modules}</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installing-software-or-packages-in-your-home-directory-home-install">Installing Software or Packages in your Home Directory {##home-install}</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#julia-packages-julia">Julia Packages {##julia}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#python-packages-python">Python Packages {##python}</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#installing-packages-in-your-home-directory-with-pip">Installing Packages in your Home Directory with pip</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#installing-packages-with-conda">Installing Packages with Conda</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#r-libraries-r">R Libraries {##R}</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../monitoring-system-and-jobs/">Monintoring System and Job Status</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Submitting Jobs</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../submitting-jobs/submitting-jobs/">Submitting Jobs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../submitting-jobs/job-array-triples/">Job Array Triples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Best Practices</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../best-practices/filesystem/">Best Practices for using the Filesystem</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../best-practices/gpu-jobs/">Optimizing your GPU Jobs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../web-portal/">Web Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../databases/">Databases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../jupyter-notebooks/">Jupyter Notebooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Additional Resources</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../faqs/">Frequently Asked Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-help/">Getting Help</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SuperCloud Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Using the System &raquo;</li>
      <li>Software and Package Management</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="software-and-package-management-software_and_packages">Software and Package Management {#software_and_packages}<a class="headerlink" href="#software-and-package-management-software_and_packages" title="Permanent link"></a></h1>
<p>The standard environment on the MIT Supercloud System is sufficient for
most. If it is not, first check to see if the tool you need is included
in a module. <code>#modules</code>{.interpreted-text role="ref"} contain
environment variables that set you up to use other software, packages,
or compilers not included in the standard stack. If there is no module
with what you need, you can often
<code>install your package or software in your home
directory &lt;#home-install&gt;</code>{.interpreted-text role="ref"}. Below we have
instructions on how to install <code>Julia &lt;#julia&gt;</code>{.interpreted-text
role="ref"}, <code>Python &lt;#python&gt;</code>{.interpreted-text role="ref"}, and
<code>R &lt;#R&gt;</code>{.interpreted-text role="ref"} packages. If you have explored
both these options or are having trouble, <a href="https://supercloud.mit.edu/contact">contact
us</a>.</p>
<h2 id="modules-modules">Modules {##modules}<a class="headerlink" href="#modules-modules" title="Permanent link"></a></h2>
<p>Modules are a handy way to set up environment variables for particular
work, especially in a shared environment. They provide an easy way to
load a particular version of a language or compiler.</p>
<p>To see what modules are available, type the command:</p>
<blockquote>
<p><code>module avail</code></p>
</blockquote>
<p>See a list currently the modules available
<code>here &lt;#avail-modules&gt;</code>{.interpreted-text role="ref"}.</p>
<p>To load a module, use the command:</p>
<blockquote>
<p><code>module load moduleName</code></p>
</blockquote>
<p>Where <code>moduleName</code> can be any of the modules listed by the module avail
command.</p>
<p>If you want to list the modules you currently have loaded, you can use
the module list command:</p>
<blockquote>
<p><code>module list</code></p>
</blockquote>
<p>If you want to change to a different version of the module you have
loaded, you can switch the module you have loaded. This is important to
do when loading a different version of a module you already have loaded,
as environment variables from one version could interfere with those of
another. To switch modules:</p>
<blockquote>
<p><code>module switch oldModuleName newModuleName</code></p>
</blockquote>
<p>Where <code>oldModuleName</code> is the name of the module you currently have
loaded, and <code>newModuleName</code> is the new module that you would like to
load.</p>
<p>If you would like to unload the module, or remove the changes the module
has made to your environment, use the following command:</p>
<blockquote>
<p><code>module unload moduleName</code></p>
</blockquote>
<p>Finally, in order to use the module command inside a script, you will
need to initialize it first.</p>
<p>The following shows a Bourne shell script example:</p>
<blockquote>
<p><code>#!/bin/bash</code> <code># Initialize the module command first source</code>
<code>source /etc/profile</code>
<code># Then use the module command to load the module needed for your work</code>
<code>module load anaconda/2020a</code></p>
</blockquote>
<h2 id="installing-software-or-packages-in-your-home-directory-home-install">Installing Software or Packages in your Home Directory {##home-install}<a class="headerlink" href="#installing-software-or-packages-in-your-home-directory-home-install" title="Permanent link"></a></h2>
<p>Many packages and software can be installed in user space, meaning they
are installed just for the user installing the package or software. The
way to do this for Julia, Python, and R packages is described below. For
other software, look at their installation documentation and see if they
have instructions on how to install in your home directory. Sometimes
this is described changing the installation location. Often you will
have to download the source and build the software in your home
directory to do this. Any dependencies can usually be installed in a
similar way. If you run into trouble installing software you can <a href="mailto:supercolud@mit.edu?subject=Help%20Installing%20Software">reach
out to us for
help</a>.
Let us know what you have tried so far and we can often point you in the
right direction.</p>
<h3 id="julia-packages-julia">Julia Packages {##julia}<a class="headerlink" href="#julia-packages-julia" title="Permanent link"></a></h3>
<p>Adding new packages in Julia doesn\'t require doing anything special. On
the login node, load a julia module and start Julia. You can enter
package mode by pressing the \"<code>]</code>\" key and entering <code>add packagename</code>,
where <code>packagename</code> is the name of your package. Or you can load <code>Pkg</code>
and run <code>Pkg.add("packagename")</code>.</p>
<p>The easiest way to check if a package already exists is to try to load
it by running <code>using packagename</code>. The <code>Pkg.status()</code> command will only
show packages that you have added to your home environment. If you would
like a list of the packages we have installed, the following lines
should do the trick (where v1.# is your version number, for example
v1.3):</p>
<blockquote>
<p><code>using Pkg; Pkg.activate(DEPOT_PATH[2]*"/environments/v1.3"); installed_pkgs = Pkg.installed(); Pkg.activate(DEPOT_PATH[1]*"/environments/v1.3"); installed_pkgs</code></p>
</blockquote>
<p>If you get an error trying to install a Julia package, first check to
make sure you are on the login node, as the compute nodes don\'t have
internet access. If you are already on the login node, it is possible
that the installation is filling up the <code>/tmp</code> directory. The errors for
this can be vague and differ between the different Julia versions. You
can try changing the temporary directory that Julia uses to unpackage
its packages for installation by setting the <code>$TMPDIR</code> environment
variable. You can create the new temporary directory and set the
environment variable like this:</p>
<blockquote>
<p><code>mkdir /state/partition1/user/$USER   export TMPDIR=/state/partition1/user/$USER</code></p>
</blockquote>
<p>Once you have done this you can start up Julia and install packages as
you normally would. Once you are done it is good practice to delete
these temporary files.</p>
<p><strong>Note:</strong> If you are using Jupyter there is an additional step you can
optionally do so that Jupyter can find both our installed packages and
your own. You can also run this if you are missing a Julia Kernel. First
load a Julia module. Then, in a Julia shell, run:</p>
<blockquote>
<p><code>using IJulia   installkernel("Julia MyKernel", env=Dict("JULIA_LOAD_PATH"=&gt;ENV["JULIA_LOAD_PATH"]))</code></p>
</blockquote>
<p>The first part \"Julia MyKernel\" is what you want to call your kernel,
so feel free to change this. The second part makes sure both our
packages and any you\'ve installed in your home directory show up on the
load path when you use a Jupyter Notebook with this kernel.</p>
<h3 id="python-packages-python">Python Packages {##python}<a class="headerlink" href="#python-packages-python" title="Permanent link"></a></h3>
<p>Many python packages are included in the Anaconda distribution. The
quickest way to check if the package you want is in our module is to
load the anaconda module, start python, and try to import the package
you are interested in. Importing the packages in our Anaconda modules
will also be much faster than importing packages that are installed in
your home directory. This is because the packages in our Anaconda
modules are installed on the local disk of every node, which is faster
to access than packages installed in your home directory.</p>
<p>If the package you are looking to install is not included in Anaconda,
then you can install it in user space in your home directory- this
allows you to install the package for you to use without affecting other
users. We recommend that you use pip to do this, as pip allows you to
only install the additional packages that you need in your home
directory. Conda environments will result in installing all packages in
your home directory, which can slow down the import process quite a bit.</p>
<h4 id="installing-packages-in-your-home-directory-with-pip">Installing Packages in your Home Directory with pip<a class="headerlink" href="#installing-packages-in-your-home-directory-with-pip" title="Permanent link"></a></h4>
<p>First, load the Anaconda module that you want to use if you haven't
already:</p>
<blockquote>
<p><code>module load anaconda/2021a</code></p>
</blockquote>
<p>Here we are loading the 2021a module, the newer modules will have newer
packages. Then, install the package with pip as you normally would, but
with the <code>--user</code> flag:</p>
<blockquote>
<p><code>pip install --user packageName</code></p>
</blockquote>
<p>Where <code>packageName</code> is the name of the package that you are installing.</p>
<p>If you get an error trying to install a package with pip, first check to
make sure you are on the login node, as the compute nodes don\'t have
internet access. If you are already on the login node, it is possible
that the installation is filling up the <code>/tmp</code> directory, you may get a
\"Disk quota exceeded\" error. You can change the temporary directory
that pip uses to unpackage its packages for installation by setting the
<code>$TMPDIR</code> environment variable. You can create the new temporary
directory, set the environment variable, and install your package like
this:</p>
<blockquote>
<p><code>mkdir /state/partition1/user/$USER   export TMPDIR=/state/partition1/user/$USER   pip install --user --no-cache-dir packageName</code></p>
</blockquote>
<p>Once you are done it is good practice to delete these temporary files.</p>
<h4 id="installing-packages-with-conda">Installing Packages with Conda<a class="headerlink" href="#installing-packages-with-conda" title="Permanent link"></a></h4>
<p>As mentioned above, if at all possible we recommend you install packages
in your home directory with pip rather than create a conda environment,
as it\'ll be much faster. However, if you need to use a conda
environment (usually this is because a package isn\'t available through
pip or to help manage complex dependencies), you can do so by loading
our anaconda module (this will give you access to the \"conda\" command)
and then creating an environment the same way you would anywhere else.
For example:</p>
<blockquote>
<p><code>module load anaconda/2021a   conda create -n my_env python=3.8 pkg1 pkg2 pkg3</code></p>
</blockquote>
<p>In this example I am loading the <code>anaconda/2021a</code> module, then creating
a conda environment named <code>my_env</code> with Python 3.8 and installing
packages pkg1, pkg2, pkg3. We have found that conda creates more robust
environments when you include all the packages you need when you create
the environment. Then, whenever you want to activate the environment,
first load the anaconda module, then activate with
<code>source activate my_env</code>. Using <code>source activate</code> instead of
<code>conda activate</code> allows you to use your conda environment at the command
line and in submission scripts without additional steps.</p>
<p>If you would like to use your conda environment in Jupyter, simply
install the \"jupyter\" package into your environment. Once you have
done that, you should see your conda environment listed in the available
kernels.</p>
<p><strong>Note:</strong> If you are using a conda environment and would like to install
the package with pip in that environment rather than in the standard
home directory location, you should <em>not</em> include the <code>--user</code> flag.
Further, if you are using a conda environment and want Python to use
packages in your environment first, you can run the following two
command:</p>
<blockquote>
<p><code>export PYTHONNOUSERSITE=True</code></p>
</blockquote>
<p>This will make sure your conda environment packages will be chosen
before those that may be installed in your home directory. If you are
using Jupyter, you will need to add this line to
the <code>.jupyter/llsc_notebook_bashrc</code> file. See the section on the bottom
of the <code>Jupyter &lt;jupyter&gt;</code>{.interpreted-text role="ref"} page for more
information.</p>
<h3 id="r-libraries-r">R Libraries {##R}<a class="headerlink" href="#r-libraries-r" title="Permanent link"></a></h3>
<p>There are two different ways we recommend that you use R. First, is
using a preset R environment that comes with the anaconda module, second
would be to create your own R conda environment. This first way works
best if you don't need to install any additional packages than what we
already have.</p>
<p>To use our R conda environment, log in and load an anaconda module. Then
you can activate the R environment with <code>source activate</code>. You can see
what packages are installed with the <code>conda list</code> command. Any packages
that start with <code>r-</code> are R libraries.</p>
<blockquote>
<p><code>module load anaconda/2020a   source activate R   conda list</code></p>
</blockquote>
<p>Then you can use R as you did before.</p>
<p>If you need to install additional packages, it's best to do it in a new
conda environment.</p>
<p>First thing to know is that many R packages are available through conda,
and some are not. What you want to do is include as many R libraries
that you'll need as you can when you create your conda environment- this
helps avoid version conflicts. Conda r libraries are all prefixed with
<code>r-</code>, so for example if you need rjava, you'd search for <code>r-rjava</code>. You
can check if conda has a library with the command:
<code>conda search r-LIBNAME</code>, where <code>LIBNAME</code> is the name of the library
you're looking for. You'll see a lot of versions, but as long as you see
something you should be good to add it.</p>
<p>Once you have a list of all the libraries available through conda,
create your conda environment (I'm calling the environment myR, feel
free to change that):</p>
<blockquote>
<p><code>conda create -n myR -c conda-forge r-essentials r-LIB1 r-LIB2…</code></p>
</blockquote>
<p>Where LIB1, LIB2, etc are the additional R libraries you'd like to
include. Sometimes this step takes a while. It'll tell you which new
packages are going to be installed, and then you can confirm by typing
<code>y</code>.</p>
<p>If you have any other libraries that weren't available through conda,
install them now. First activate your new environment and then start R:</p>
<blockquote>
<p><code>source activate myR   R</code></p>
</blockquote>
<p>Then you can install your remaining libraries. You can do some test
loads here as well, to make sure the libraries installed properly.</p>
<blockquote>
<p><code>install.packages(“PKGNAME”)   library(PKGNAME)</code></p>
</blockquote>
<p>In Jupyter, you should see your environment show up as a kernel. For a
batch job, you'll have to activate the environment either in your
submission script or before you submit the job.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../files-and-data/shared-groups/" class="btn btn-neutral float-left" title="Shared Groups"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../monitoring-system-and-jobs/" class="btn btn-neutral float-right" title="Monintoring System and Job Status">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../files-and-data/shared-groups/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../monitoring-system-and-jobs/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
